var fluidPlayerScriptLocation=function(){var e="";return e=document.currentScript?document.currentScript.src:function(){var e=document.getElementsByTagName("script"),t=e[e.length-1];return void 0!==t.getAttribute.length?t.src:t.getAttribute("src",-1)}(),e?e.substring(0,e.lastIndexOf("/")+1):""}();fluidPlayer=function(e,t,i){var n=fluidPlayerClass.constructor();for(var l in fluidPlayerClass)fluidPlayerClass.hasOwnProperty(l)&&!function(e,t){for(var i=t.length,n=0;n<i;n++)if(t[n]==e)return!0;return!1}(l,fluidPlayerClass.notCloned)&&(n[l]=fluidPlayerClass[l]);return fluidPlayerClass.instances.push(n),n.init(e,t,i),n};var fluidPlayerClass={vttParserScript:"webvtt.js",instances:[],notCloned:["notCloned","vttParserScript","instances","getInstanceById","requestStylesheet","reqiestScript","isTouchDevice","vastOptions","displayOptions","getEventOffsetX","getEventOffsetY","getTranslateX","toggleElementText","getMobileOs","findClosestParent"],version:"1.1.3",homepage:"https://www.fluidplayer.com/",getInstanceById:function(e){for(var t=0;t<this.instances.length;t++)if(this.instances[t].videoPlayerId===e)return this.instances[t];return null},requestStylesheet:function(e,t){if(!document.getElementById(e)){var i=document.getElementsByTagName("head")[0],n=document.createElement("link");n.id=e,n.rel="stylesheet",n.type="text/css",n.href=t,n.media="all",i.appendChild(n)}},requestScript:function(e,t){var i=document.getElementsByTagName("head")[0],n=document.createElement("script");n.type="text/javascript",n.src=e,n.onreadystatechange=t,n.onload=t,i.appendChild(n)},isTouchDevice:function(){return!!("ontouchstart"in window||navigator.maxTouchPoints)},getMobileOs:function(){var e,t=navigator.userAgent,i={device:!1,userOs:!1,userOsVer:!1,userOsMajor:!1};if(t.match(/iPad/i)?(i.device="iPad",i.userOs="iOS",e=t.indexOf("OS ")):t.match(/iPhone/i)?(i.device="iPhone",i.userOs="iOS",e=t.indexOf("OS ")):t.match(/Android/i)?(i.userOs="Android",e=t.indexOf("Android ")):i.userOs=!1,"iOS"===i.userOs&&e>-1){var n=t.substr(e+3);-1!==n.indexOf(" ")&&(i.userOsVer=n.substring(0,n.indexOf(" ")).replace(/_/g,"."),i.userOsMajor=parseInt(i.userOsVer))}else"Android"===i.userOs&&e>-1?i.userOsVer=t.substr(e+8,3):i.userOsVer=!1;return i},getCurrentVideoDuration:function(){var e=document.getElementById(this.videoPlayerId);return e?e.duration:0},getClickThroughUrlFromLinear:function(e){var t=e.getElementsByTagName("VideoClicks");if(t.length){var i=t[0].getElementsByTagName("ClickThrough");if(i.length)return i[0].childNodes[0].nodeValue}return!1},getTrackingFromLinear:function(e){var t=e.getElementsByTagName("TrackingEvents");return t.length?t[0].getElementsByTagName("Tracking"):[]},getDurationFromLinear:function(e){var t=e.getElementsByTagName("Duration");return!(!t.length||void 0===t[0].childNodes[0])&&this.convertTimeStringToSeconds(t[0].childNodes[0].nodeValue)},getMediaFilesFromLinear:function(e){var t=e.getElementsByTagName("MediaFiles");return t.length?t[0].getElementsByTagName("MediaFile"):[]},getMediaFileFromLinear:function(e){for(var t,i=this.getMediaFilesFromLinear(e),n=0;n<i.length;n++)if(i[n].getAttribute("type")||(t=i[n].childNodes[0].nodeValue),i[n].getAttribute("type")===this.displayOptions.mediaType)return i[n].childNodes[0].nodeValue;return t},registerTrackingEvents:function(){trackingEvents=this.getTrackingFromLinear(creativeLinear);for(var e="",t=0,i=0;i<trackingEvents.length;i++)switch(e=trackingEvents[i].getAttribute("event")){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":void 0===this.vastOptions.tracking[e]&&(this.vastOptions.tracking[e]=[]),void 0===this.vastOptions.stopTracking[e]&&(this.vastOptions.stopTracking[e]=[]),this.vastOptions.tracking[e].push(trackingEvents[i].childNodes[0].nodeValue),this.vastOptions.stopTracking[e]=!1;break;case"progress":void 0===this.vastOptions.tracking[e]&&(this.vastOptions.tracking[e]=[]),t=this.convertTimeStringToSeconds(trackingEvents[i].getAttribute("offset")),void 0===this.vastOptions.tracking[e][t]&&(this.vastOptions.tracking[e][t]={elements:[],stopTracking:!1}),this.vastOptions.tracking[e][t].elements.push(trackingEvents[i].childNodes[0].nodeValue)}},registerImpressionEvents:function(e){if(e.length){this.vastOptions.impression=[];for(var t=0;t<e.length;t++)this.vastOptions.impression.push(e[t].childNodes[0].nodeValue)}},registerErrorEvents:function(e){void 0!==e&&null!==e&&1===e.length&&1===e[0].childNodes.length&&(this.vastOptions.errorUrl=e[0].childNodes[0].nodeValue)},announceError:function(e){if(void 0!==this.vastOptions.errorUrl&&this.vastOptions.errorUrl){e=void 0!==e?parseInt(e):900;var t=this.vastOptions.errorUrl.replace("[ERRORCODE]",e);this.callUris([t])}},getClickTrackingEvents:function(e){var t=[],i=e.getElementsByTagName("VideoClicks");if(i.length){var n=i[0].getElementsByTagName("ClickTracking");if(n.length)for(var l=0;l<n.length;l++)t.push(n[l].childNodes[0].nodeValue)}return t},callUris:function(e){for(var t=0;t<e.length;t++)(new Image).src=e[t]},recalculateAdDimensions:function(e){e||void 0===this.videoPlayerId||(e=this.videoPlayerId);var t=document.getElementById(e),i=document.getElementById("vast_clickthrough_layer_"+e);i&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px")},prepareVast:function(){var e=this;e.initialStart=!0,e.parseVastTag(e.vastOptions.vastTagUrl)},toggleLoader:function(e){if("browser"!==this.displayOptions.layout){var t=document.getElementById("vast_video_loading_"+this.videoPlayerId);t.style.display=e?"table":"none"}},sendRequest:function(e,t,i,n){var l=new XMLHttpRequest;l.onreadystatechange=n,l.open("GET",e,!0),l.withCredentials=t,l.timeout=i,l.send()},playMainVideoWhenVastFails:function(e){var t=this,i=document.getElementById(t.videoPlayerId);i.removeEventListener("loadedmetadata",t.switchPlayerToVastMode),i.pause(),t.toggleLoader(!1),t.displayOptions.noVastVideoCallback(),t.announceError(e),t.switchToMainVideo()},parseVastTag:function(e){var t=this;t.toggleLoader(!0),t.sendRequest(e,!0,t.displayOptions.vastTimeout,function(){var e=this;if(4!==e.readyState||200===e.status){if(4===e.readyState&&200===e.status){var i=e.responseXML,n=i.getElementsByTagName("Impression");null!==n&&t.registerImpressionEvents(n);var l=i.getElementsByTagName("Error");null!==l&&t.registerErrorEvents(l),t.vastOptions.skipoffset=!1,t.vastOptions.adFinished=!1;var o=i.getElementsByTagName("Creative");if(void 0!==o&&o.length){var s=o[0].getElementsByTagName("Linear");void 0!==s&&null!==s&&s.length&&(creativeLinear=s[0],t.vastOptions.skipoffset=t.convertTimeStringToSeconds(creativeLinear.getAttribute("skipoffset")),t.vastOptions.clickthroughUrl=t.getClickThroughUrlFromLinear(creativeLinear),t.vastOptions.clicktracking=t.getClickTrackingEvents(creativeLinear),t.vastOptions.duration=t.getDurationFromLinear(creativeLinear),t.vastOptions.mediaFile=t.getMediaFileFromLinear(creativeLinear),t.registerTrackingEvents()),void 0!==t.vastOptions.mediaFile?(t.preRoll(),t.displayOptions.vastLoadedCallback()):t.playMainVideoWhenVastFails(101)}else t.playMainVideoWhenVastFails(101)}}else t.playMainVideoWhenVastFails(900)})},switchPlayerToVastMode:function(){},preRoll:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=function(t,i){var n=[];switch(t){case"start":case"firstQuartile":case"midpoint":case"thirdQuartile":case"complete":!1===e.vastOptions.stopTracking[t]&&(null!==e.vastOptions.tracking[t]&&(n=e.vastOptions.tracking[t]),e.vastOptions.stopTracking[t]=!0);break;case"progress":e.vastOptions.tracking.progress[i].elements.forEach(function(t,l){!1===e.vastOptions.tracking.progress[i].stopTracking&&e.vastOptions.tracking.progress[i].elements.length&&(n=e.vastOptions.tracking.progress[i].elements),e.vastOptions.tracking.progress[i].stopTracking=!0});break;case"impression":void 0!==e.vastOptions.impression&&null!==e.vastOptions.impression&&"unknown"!=typeof e.vastOptions.impression.length&&(n=e.vastOptions.impression)}e.callUris(n)},n=function(){if(e.vastOptions.adFinished)t.removeEventListener("timeupdate",n);else{var l=Math.floor(t.currentTime);0==l&&i("start"),void 0!==e.vastOptions.tracking.progress&&e.vastOptions.tracking.progress.length&&void 0!==e.vastOptions.tracking.progress[l]&&i("progress",l),l==Math.floor(e.vastOptions.duration/4)&&i("firstQuartile"),l==Math.floor(e.vastOptions.duration/2)&&i("midpoint"),l==Math.floor(3*e.vastOptions.duration/4)&&i("thirdQuartile"),l>=e.vastOptions.duration-1&&(i("complete"),t.removeEventListener("timeupdate",n),e.vastOptions.adFinished=!0)}};e.switchPlayerToVastMode=function(){if(e.vastOptions.duration||(e.vastOptions.duration=t.duration),e.addClickthroughLayer(e.videoPlayerId),!1!==e.vastOptions.skipoffset&&e.addSkipButton(),e.addCTAButton(),t.removeAttribute("controls"),"browser"!==e.displayOptions.layout){var n=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container");null!==n&&(n.className=n.className.replace(/\bfluid_slider\b/g,"fluid_ad_slider"))}e.displayOptions.adText&&e.addAdPlayingText(e.displayOptions.adText),e.toggleLoader(!1),t.play(),i("impression"),t.removeEventListener("loadedmetadata",e.switchPlayerToVastMode)},t.pause(),t.addEventListener("loadedmetadata",e.switchPlayerToVastMode),t.src=e.vastOptions.mediaFile,e.isCurrentlyPlayingAd=!0,t.load(),t.addEventListener("ended",e.onVastAdEnded),t.addEventListener("timeupdate",n)},switchToMainVideo:function(){var e=this,t=document.getElementById(e.videoPlayerId);if(t.src=e.originalSrc,t.load(),t.play(),e.isCurrentlyPlayingAd=!1,e.removeClickthrough(),e.removeSkipButton(),e.removeAdPlayingText(),e.removeCTAButton(),e.vastOptions.adFinished=!0,e.displayOptions.vastVideoEndedCallback(),"browser"!==e.displayOptions.layout){var i=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container");null!==i&&(i.className=i.className.replace(/\bfluid_ad_slider\b/g,"fluid_slider"))}t.removeEventListener("ended",e.onVastAdEnded),"browser"===e.displayOptions.layout&&t.setAttribute("controls","controls")},onVastAdEnded:function(){fluidPlayerClass.getInstanceById(this.id).switchToMainVideo()},addSkipButton:function(){var e=document.getElementById(this.videoPlayerId),t=document.createElement("div");t.id="skip_button_"+this.videoPlayerId,t.className="skip_button skip_button_disabled",t.innerHTML=this.displayOptions.skipButtonCaption.replace("[seconds]",this.vastOptions.skipoffset),document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(t),e.addEventListener("timeupdate",this.decreaseSkipOffset,!1)},addAdPlayingText:function(){var e=this.displayOptions.adText,t=document.createElement("div");t.id=this.videoPlayerId+"_fluid_ad_playing",t.className="fluid_ad_playing",t.innerText=e,document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(t)},removeAdPlayingText:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_ad_playing");e&&e.parentElement.removeChild(e)},addCTAButton:function(){if(this.displayOptions.adCTAText){var e=this,t=document.getElementById(this.videoPlayerId),i=document.createElement("div");i.id=this.videoPlayerId+"_fluid_cta",i.className="fluid_ad_cta";var n=document.createElement("a");n.href=e.vastOptions.clickthroughUrl,n.target="_blank",n.innerText=this.displayOptions.adCTAText,n.onclick=function(){return t.paused||t.pause(),!0},i.appendChild(n),document.getElementById("fluid_video_wrapper_"+this.videoPlayerId).appendChild(i)}},removeCTAButton:function(){var e=document.getElementById(this.videoPlayerId+"_fluid_cta");e&&e.parentElement.removeChild(e)},decreaseSkipOffset:function(){var e=this,t=fluidPlayerClass.getInstanceById(e.id),i=t.vastOptions.skipoffset-Math.floor(e.currentTime),n=document.getElementById("skip_button_"+t.videoPlayerId);n?i>=1?n.innerHTML=t.displayOptions.skipButtonCaption.replace("[seconds]",i):(n.innerHTML='<a href="javascript:;" onclick="fluidPlayerClass.getInstanceById(\''+t.videoPlayerId+"').pressSkipButton();\">"+t.displayOptions.skipButtonClickCaption+"</a>",n.className=n.className.replace(/\bskip_button_disabled\b/,""),e.removeEventListener("timeupdate",t.decreaseSkipOffset)):(i=0,e.removeEventListener("timeupdate",e.decreaseSkipOffset))},pressSkipButton:function(){this.removeSkipButton(),this.removeAdPlayingText(),this.removeCTAButton(),this.displayOptions.vastVideoSkippedCallback();var e=document.createEvent("Event");e.initEvent("ended",!1,!0),document.getElementById(this.videoPlayerId).dispatchEvent(e)},removeSkipButton:function(){btn=document.getElementById("skip_button_"+this.videoPlayerId),btn&&btn.parentElement.removeChild(btn)},addClickthroughLayer:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=document.getElementById("fluid_video_wrapper_"+e.videoPlayerId),n=document.createElement("div");n.className="vast_clickthrough_layer",n.id="vast_clickthrough_layer_"+e.videoPlayerId,n.setAttribute("style","position: absolute; cursor: pointer; top: 0; left: 0; width: "+t.offsetWidth+"px; height: "+t.offsetHeight+"px;"),i.appendChild(n);var l=function(){window.open(e.vastOptions.clickthroughUrl),void 0!==e.vastOptions.clicktracking&&e.callUris(e.vastOptions.clicktracking)},o=document.getElementById("vast_clickthrough_layer_"+e.videoPlayerId),s=fluidPlayerClass.getMobileOs(),a="iPhone"===s.device&&!1!==s.userOsMajor&&s.userOsMajor<=9;o.onclick=function(){t.paused?a&&!e.suppressClickthrough?(l(),e.suppressClickthrough=!0):t.play():l()}},removeClickthrough:function(){var e=document.getElementById("vast_clickthrough_layer_"+this.videoPlayerId);e&&e.parentNode.removeChild(e)},getCurrentSrc:function(){var e=document.getElementById(this.videoPlayerId).getElementsByTagName("source");return e.length?e[0].getAttribute("src"):null},convertTimeStringToSeconds:function(e){if(e&&e.match(/^(\d){2}(:[0-5][0-9]){2}(.(\d){1,3})?$/)){var t=e.split(":");return 3600*parseInt(t[0],10)+60*parseInt(t[1],10)+parseInt(t[2],10)}return!1},onRecentWaiting:function(){var e=fluidPlayerClass.getInstanceById(this.id);e.recentWaiting=!0,setTimeout(function(){e.recentWaiting=!1},1e3)},onFluidPlayerPause:function(){var e=this;setTimeout(function(){if(!fluidPlayerClass.getInstanceById(e.id).recentWaiting){var t=document.createEvent("CustomEvent");t.initEvent("fluidplayerpause",!1,!0),e.dispatchEvent(t)}},100)},checkShouldDisplayVolumeControls:function(){return"iOS"!==fluidPlayerClass.getMobileOs().userOs},generateCustomControlTags:function(){return'<div class="fluid_controls_left">   <div id="'+this.videoPlayerId+'_fluid_control_playpause" class="fluid_button fluid_button_play"></div></div><div id="'+this.videoPlayerId+'_fluid_controls_progress_container" class="fluid_controls_progress_container fluid_slider">   <div class="fluid_controls_progress">      <div id="'+this.videoPlayerId+'_vast_control_currentprogress" class="fluid_controls_currentprogress">          <div id="'+this.videoPlayerId+'_vast_control_currentpos" class="fluid_controls_currentpos"></div>      </div>   </div></div><div class="fluid_controls_right">   <div id="'+this.videoPlayerId+'_fluid_control_fullscreen" class="fluid_button fluid_button_fullscreen"></div>   <div id="'+this.videoPlayerId+'_fluid_control_video_source" class="fluid_button_video_source"></div>   <div id="'+this.videoPlayerId+'_fluid_control_volume_container" class="fluid_control_volume_container fluid_slider">       <div id="'+this.videoPlayerId+'_fluid_control_volume" class="fluid_control_volume">           <div id="'+this.videoPlayerId+'_fluid_control_currentvolume" class="fluid_control_currentvolume">               <div id="'+this.videoPlayerId+'_fluid_control_volume_currentpos" class="fluid_control_volume_currentpos"></div>           </div>       </div>   </div>   <div id="'+this.videoPlayerId+'_fluid_control_mute" class="fluid_button fluid_button_volume"></div>   <div id="'+this.videoPlayerId+'_fluid_control_duration" class="fluid_fluid_control_duration">00:00 / 00:00</div></div>'},controlPlayPauseToggle:function(e,t){var i=document.getElementById(e+"_fluid_control_playpause"),n=document.getElementById(e+"context_option_play");t?(i.className=i.className.replace(/\bfluid_button_play\b/g,"fluid_button_pause"),null!==n&&(n.innerHTML="Pause")):(i.className=i.className.replace(/\bfluid_button_pause\b/g,"fluid_button_play"),null!==n&&(n.innerHTML="Play"))},contolProgressbarUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);document.getElementById(e+"_vast_control_currentprogress").style.width=i.currentTime/t.currentVideoDuration*100+"%"},contolDurationUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e);if(t.isCurrentlyPlayingAd)n="00:00 / 00:00";else var i=document.getElementById(e),n=t.pad(parseInt(i.currentTime/60))+":"+t.pad(parseInt(i.currentTime%60))+" / "+t.pad(parseInt(t.currentVideoDuration/60))+":"+t.pad(parseInt(t.currentVideoDuration%60));document.getElementById(e+"_fluid_control_duration").innerHTML=n},pad:function(e){return e<10?"0"+e:e},contolVolumebarUpdate:function(e){var t=fluidPlayerClass.getInstanceById(e);if("browser"!==t.displayOptions.layout){var i=document.getElementById(e),n=document.getElementById(e+"_fluid_control_currentvolume"),l=document.getElementById(e+"_fluid_control_volume_currentpos"),o=document.getElementById(e+"_fluid_control_volume").clientWidth,s=l.clientWidth,a=document.getElementById(e+"_fluid_control_mute"),r=document.getElementById(e+"context_option_mute");i.volume&&(t.latestVolume=i.volume),i.volume?(a.className=a.className.replace(/\bfluid_button_mute\b/g,"fluid_button_volume"),null!==r&&(r.innerHTML="Mute")):(a.className=a.className.replace(/\bfluid_button_volume\b/g,"fluid_button_mute"),null!==r&&(r.innerHTML="Unmute")),n.style.width=i.volume*o+"px",l.style.left=i.volume*o-s/2+"px"}},muteToggle:function(e){var t=fluidPlayerClass.getInstanceById(e),i=document.getElementById(e);i.volume?i.volume=0:i.volume=t.latestVolume},checkFullscreenSupport:function(e){var t=document.getElementById(e);return t.mozRequestFullScreen?{goFullscreen:"mozRequestFullScreen",exitFullscreen:"mozCancelFullScreen",isFullscreen:"mozFullScreenElement"}:t.webkitRequestFullscreen?{goFullscreen:"webkitRequestFullscreen",exitFullscreen:"webkitExitFullscreen",isFullscreen:"webkitFullscreenElement"}:t.msRequestFullscreen?{goFullscreen:"msRequestFullscreen",exitFullscreen:"msExitFullscreen",isFullscreen:"msFullscreenElement"}:!!t.requestFullscreen&&{goFullscreen:"requestFullscreen",exitFullscreen:"exitFullscreen",isFullscreen:"fullscreenElement"}},fullscreenToggle:function(e){var t=document.getElementById("fluid_video_wrapper_"+e),i=this.checkFullscreenSupport("fluid_video_wrapper_"+e),n=document.getElementById(e+"_fluid_control_fullscreen"),l=document.getElementById(e+"context_option_fullscreen");if(i){var o="";null===document[i.isFullscreen]?(o="videoPlayerTag."+i.goFullscreen+"();",n.className=n.className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit"),null!==l&&(l.innerHTML="Exit Fullscreen")):(o="document."+i.exitFullscreen+"();",n.className=n.className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen"),null!==l&&(l.innerHTML="Fullscreen")),new Function("videoPlayerTag",o)(t)}else-1!==t.className.search(/\bpseudo_fullscreen\b/g)?(t.className=t.className.replace(/\bpseudo_fullscreen\b/g,""),n.className=n.className.replace(/\bfluid_button_fullscreen_exit\b/g,"fluid_button_fullscreen"),null!==l&&(l.innerHTML="Fullscreen")):(t.className+=" pseudo_fullscreen",n.className=n.className.replace(/\bfluid_button_fullscreen\b/g,"fluid_button_fullscreen_exit"),null!==l&&(l.innerHTML="Exit Fullscreen"));this.recalculateAdDimensions()},findClosestParent:function(e,t){var i;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(i=e,!0)});var n;if(e[i](t))return e;for(;e;){if((n=e.parentElement)&&n[i](t))return n;e=n}return null},getTranslateX:function(e){var t=null;try{var i=e.style.transform.match(/translate3d\((-?\d+px,\s?){2}-?\d+px\)/);i&&i.length&&(t=i[0].replace("translate3d(","").replace(")","").replace(/\s/g,"").replace(/px/g,"").split(","))}catch(e){t=null}return t&&3===t.length?parseInt(t[0]):0},getEventOffsetX:function(e,t){for(var i=0,n=0;t&&!isNaN(t.offsetLeft);)n=fluidPlayerClass.getTranslateX(t),"BODY"===t.tagName?i+=t.offsetLeft+t.clientLeft+n-(t.scrollLeft||document.documentElement.scrollLeft):i+=t.offsetLeft+t.clientLeft+n-t.scrollLeft,t=t.offsetParent;return e.clientX-i},getEventOffsetY:function(e,t){var i=1,n=fluidPlayerClass.findClosestParent(t,'div[id^="fluid_video_wrapper_"]');if(n){var l=n.id.replace("fluid_video_wrapper_",""),o=fluidPlayerClass.checkFullscreenSupport("fluid_video_wrapper_"+l);o&&document[o.isFullscreen]&&(i=0)}for(var s=0;t&&!isNaN(t.offsetTop);)"BODY"===t.tagName?s+=t.offsetTop-(t.scrollTop||document.documentElement.scrollTop)*i:s+=t.offsetTop-t.scrollTop*i,t=t.offsetParent;return e.clientY-s},onProgressbarClick:function(e,t){var i=fluidPlayerClass.getInstanceById(e);if(!i.isCurrentlyPlayingAd){var n=document.getElementById(e),l=document.getElementById(e+"_fluid_controls_progress_container").clientWidth,o=fluidPlayerClass.getEventOffsetX(t,document.getElementById(e+"_fluid_controls_progress_container"));l&&(n.currentTime=i.currentVideoDuration*o/l)}},onVolumebarClick:function(e,t){var i=document.getElementById(e),n=document.getElementById(e+"_fluid_control_volume_container").clientWidth,l=fluidPlayerClass.getEventOffsetX(t,document.getElementById(e+"_fluid_control_volume_container"));if(n){var o=l/n;o<.05?o=0:o>.95&&(o=1),i.volume=o}},initialPlay:function(){var e=this,t=fluidPlayerClass.getInstanceById(e.id);t.initialStart||(t.playPauseToggle(e),e.removeEventListener("play",t.initialPlay))},playPauseToggle:function(e){var t=fluidPlayerClass.getInstanceById(e.id),i=!1;if(t.initialStart||!t.vastOptions.vastTagUrl)t.initialStart||t.vastOptions.vastTagUrl||(t.initialStart=!0,i=!0,t.displayOptions.noVastVideoCallback()),"browser"!==t.displayOptions.layout&&(e.paused?e.play():i||e.pause());else{var n=window.navigator.userAgent,l=fluidPlayerClass.getMobileOs();!1===l.userOs&&!1===l.device||!(window.chrome||-1!==n.indexOf("crios")||0===window.navigator.vendor.indexOf("Google")&&-1!==n.indexOf("chrome"))||(e.src=fluidPlayerScriptLocation+"blank.mp4",e.play()),t.prepareVast()}var o=document.getElementById(t.videoPlayerId+"_fluid_html_on_pause");o&&!t.isCurrentlyPlayingAd&&(e.paused?o.style.display="flex":o.style.display="none")},setCustomControls:function(){var e=this,t=document.getElementById(this.videoPlayerId);document.getElementById(this.videoPlayerId+"_fluid_control_playpause").addEventListener("click",function(){e.initialStart||t.removeEventListener("play",e.initialPlay),e.playPauseToggle(t)},!1),document.getElementById(e.videoPlayerId).addEventListener("play",function(){e.controlPlayPauseToggle(e.videoPlayerId,!0),e.contolVolumebarUpdate(e.videoPlayerId)},!1),document.getElementById(e.videoPlayerId).addEventListener("fluidplayerpause",function(){e.controlPlayPauseToggle(e.videoPlayerId,!1)},!1),t.addEventListener("timeupdate",function(){e.contolProgressbarUpdate(e.videoPlayerId),e.contolDurationUpdate(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("click",function(t){e.onProgressbarClick(e.videoPlayerId,t)},!1),document.getElementById(e.videoPlayerId+"_fluid_control_volume_container").addEventListener("click",function(t){e.onVolumebarClick(e.videoPlayerId,t)},!1),t.addEventListener("volumechange",function(){e.contolVolumebarUpdate(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_control_mute").addEventListener("click",function(){e.muteToggle(e.videoPlayerId)}),document.getElementById(e.videoPlayerId+"_fluid_control_fullscreen").addEventListener("click",function(){e.fullscreenToggle(e.videoPlayerId)})},setCustomContextMenu:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_context_menu",i.className="fluid_context_menu",i.style.display="none",i.style.position="absolute",i.innerHTML='<ul>    <li id="'+e.videoPlayerId+'context_option_play">Play</li>    <li id="'+e.videoPlayerId+'context_option_mute">Mute</li>    <li id="'+e.videoPlayerId+'context_option_fullscreen">Fullscreen</li>    <li id="'+e.videoPlayerId+'context_option_homepage">       <a            id="'+e.videoPlayerId+'context_option_homepage_link"            href="'+e.homepage+'"            target="_blank">           Fluidplayer '+e.version+"       </a>     </li></ul>",t.parentNode.insertBefore(i,t.nextSibling),t.addEventListener("contextmenu",function(e){e.preventDefault(),i.style.left=fluidPlayerClass.getEventOffsetX(e,t)+"px",i.style.top=fluidPlayerClass.getEventOffsetY(e,t)+"px",i.style.display="block"},!1),document.addEventListener("click",function(e){e.target===t&&2===e.button||(i.style.display="none")},!1);var n=document.getElementById(e.videoPlayerId+"context_option_play"),l=document.getElementById(e.videoPlayerId+"context_option_mute"),o=document.getElementById(e.videoPlayerId+"context_option_fullscreen"),s=document.getElementById(e.videoPlayerId+"context_option_homepage_link");n.addEventListener("click",function(){e.playPauseToggle(t)},!1),l.addEventListener("click",function(){e.muteToggle(e.videoPlayerId)},!1),o.addEventListener("click",function(){e.fullscreenToggle(e.videoPlayerId)},!1),s.style.color="inherit",s.style.textDecoration="inherit"},setDefaultLayout:function(){var e=this,t=document.getElementById(e.videoPlayerId);document.getElementById("fluid_video_wrapper_"+e.videoPlayerId).className+=" fluid_player_layout_"+e.displayOptions.layout,fluidPlayerClass.requestStylesheet("controls_stylesheet_"+e.videoPlayerId,e.displayOptions.templateLocation+e.displayOptions.layout+"/styles.css"),t.removeAttribute("controls"),e.setCustomContextMenu();var i="";e.checkShouldDisplayVolumeControls()||(i=" no_volume_controls");var n=document.createElement("div");n.id=e.videoPlayerId+"_fluid_controls_container",n.className="fluid_controls_container"+i,n.innerHTML=e.generateCustomControlTags(),t.parentNode.insertBefore(n,t.nextSibling);var l=document.createElement("div");l.className="vast_video_loading",l.id="vast_video_loading_"+e.videoPlayerId,l.style.display="none",t.parentNode.insertBefore(l,t.nextSibling);var o=100;if(e.checkShouldDisplayVolumeControls())var s=setInterval(function(){o?e.checkIfVolumebarIsRendered()?(clearInterval(s),e.contolVolumebarUpdate(e.videoPlayerId)):o--:clearInterval(s)},100);e.setCustomControls(),e.setupThumbnailPreview()},checkIfVolumebarIsRendered:function(){var e=this,t=document.getElementById(e.videoPlayerId+"_fluid_control_volume_currentpos"),i=document.getElementById(e.videoPlayerId+"_fluid_control_volume").clientWidth;return t.clientWidth!==i},forceLayoutIfNeeded:function(){var e=window.navigator.userAgent;e.match(/iPhone/i)&&e.match(/WebKit/i)&&!e.match(/CriOS/i)&&(this.displayOptions.layout="browser")},setLayout:function(){var e=this,t=document.getElementById(e.videoPlayerId);switch(e.forceLayoutIfNeeded(),t.addEventListener("play",e.initialPlay,!1),document.getElementById(this.videoPlayerId).addEventListener("click",function(){e.playPauseToggle(t)},!1),this.displayOptions.layout){case"browser":break;default:this.setDefaultLayout()}},handleFullscreen:function(){var e=this.videoPlayerId,t=this;void 0===document.vastFullsreenChangeEventListenersAdded&&(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange"].forEach(function(i){"object"==typeof document["on"+i]&&document.addEventListener(i,function(i){t.recalculateAdDimensions(e)},!1)}),document.vastFullsreenChangeEventListenersAdded=!0)},setupThumbnailPreviewVtt:function(){var e=this;e.sendRequest(e.displayOptions.timelinePreview.file,!0,e.displayOptions.vastTimeout,function(){var t=this;if((4!==t.readyState||200===t.status)&&4===t.readyState&&200===t.status){var i=t.responseText,n=(new WebVTTParser).parse(i);e.timelinePreviewData=function(t){if(void 0===t.cues||!t.cues.length)return[];for(var i=[],n=null,l=null,o=0;o<t.cues.length;o++)2===(n=t.cues[o].text.split("#")).length&&0===n[1].indexOf("xywh=")&&4===(l=(l=n[1].substring(5)).split(",")).length&&i.push({startTime:t.cues[o].startTime,endTime:t.cues[o].endTime,image:e.displayOptions.timelinePreview.sprite?e.displayOptions.timelinePreview.sprite:n[0],x:parseInt(l[0]),y:parseInt(l[1]),w:parseInt(l[2]),h:parseInt(l[3])});return i}(n)}})},generateTimelinePreviewTags:function(){var e=this,t=document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container"),i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_timeline_preview_container",i.className="fluid_timeline_preview_container",i.style.display="none",i.style.position="absolute",t.appendChild(i)},getThumbnailCoordinates:function(e){var t=this;if(t.timelinePreviewData.length)for(var i=0;i<t.timelinePreviewData.length;i++)if(e>=t.timelinePreviewData[i].startTime&&e<=t.timelinePreviewData[i].endTime)return t.timelinePreviewData[i];return!1},drawTimelinePreview:function(e){var t=this,i=document.getElementById(t.videoPlayerId+"_fluid_timeline_preview_container"),n=document.getElementById(t.videoPlayerId+"_fluid_controls_progress_container"),l=n.clientWidth;if(t.isCurrentlyPlayingAd)"none"!==i.style.display&&(i.style.display="none");else{var o=fluidPlayerClass.getEventOffsetX(e,n),s=null;if(l){s=t.currentVideoDuration*o/l;var a=t.getThumbnailCoordinates(s);!1!==a?(i.style.width=a.w+"px",i.style.height=a.h+"px",i.style.background="url("+a.image+") no-repeat scroll -"+a.x+"px -"+a.y+"px",i.style.left=o-a.w/2+"px",i.style.display="block"):i.style.display="none"}}},setupThumbnailPreview:function(){var e=this;if(e.displayOptions.timelinePreview&&"string"==typeof e.displayOptions.timelinePreview.file&&"string"==typeof e.displayOptions.timelinePreview.type)switch(e.displayOptions.timelinePreview.type){case"VTT":fluidPlayerClass.requestScript(e.displayOptions.scriptsLocation+fluidPlayerClass.vttParserScript,e.setupThumbnailPreviewVtt.bind(this)),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mousemove",e.drawTimelinePreview.bind(e),!1),document.getElementById(e.videoPlayerId+"_fluid_controls_progress_container").addEventListener("mouseout",function(){document.getElementById(e.videoPlayerId+"_fluid_timeline_preview_container").style.display="none"},!1),e.generateTimelinePreviewTags()}},setupPlayerWrapper:function(){var e=this,t=document.getElementById(e.videoPlayerId),i=document.createElement("div");i.className=fluidPlayerClass.isTouchDevice()?"fluid_video_wrapper mobile":"fluid_video_wrapper",i.id="fluid_video_wrapper_"+e.videoPlayerId,e.displayOptions.responsive?i.style.width="100%":(i.style.height=t.clientHeight+"px",i.style.width=t.clientWidth+"px"),t.style.height="100%",t.style.width="100%",t.parentNode.insertBefore(i,t),i.appendChild(t)},onErrorDetection:function(){var e=this,t=fluidPlayerClass.getInstanceById(e.id);e.networkState===e.NETWORK_NO_SOURCE&&t.isCurrentlyPlayingAd&&t.playMainVideoWhenVastFails(401)},createVideoSourceSwitch:function(){var e=this,t=document.getElementById(e.videoPlayerId);if("browser"!==e.displayOptions.layout){var i=[],n=t.querySelectorAll("source");if([].forEach.call(n,function(e){e.title&&e.src&&i.push({title:e.title,url:e.src})}),e.videoSources=i,e.videoSources.length>1){var l=document.getElementById(e.videoPlayerId+"_fluid_control_video_source"),o=document.createElement("div");o.id=e.videoPlayerId+"_fluid_control_video_source_title",o.className="fluid_video_sources_title",o.innerText=e.videoSources[0].title,l.appendChild(o);var s=document.createElement("div");s.id=e.videoPlayerId+"_fluid_control_video_source_list",s.className="fluid_video_sources_list",s.style.display="none",e.videoSources.forEach(function(t){var i=document.createElement("div");i.className="fluid_video_source_list_item",i.innerText=t.title,i.addEventListener("click",function(t){t.stopPropagation();var i=this;e.videoSources.forEach(function(t){t.title==i.innerText&&(o.innerText=t.title,e.setVideoSource(t.url))}),e.openCloseVideoSourceSwitch()}),s.appendChild(i)}),l.appendChild(s),l.addEventListener("click",function(){e.openCloseVideoSourceSwitch()})}}},openCloseVideoSourceSwitch:function(){var e=this,t=document.getElementById(this.videoPlayerId+"_fluid_control_video_source_list"),i=document.getElementById(this.videoPlayerId+"_fluid_control_video_source");if(e.isCurrentlyPlayingAd)t.style.display="none";else if("none"==t.style.display){t.style.display="block";var n=function(e){i.removeEventListener("mouseleave",n),t.style.display="none"};i.addEventListener("mouseleave",n)}else t.style.display="none"},setVideoSource:function(e){var t=this,i=document.getElementById(t.videoPlayerId);if(t.isCurrentlyPlayingAd)t.originalSrc=e;else{n=!1;if(!i.paused){t.playPauseToggle(i);var n=!0}var l=i.currentTime,o=function(){i.removeEventListener("loadedmetadata",o),i.currentTime=l,n&&t.playPauseToggle(i)};i.addEventListener("loadedmetadata",o),i.src=e,t.originalSrc=e}},initLogo:function(){var e=this,t=document.getElementById(e.videoPlayerId);if(e.displayOptions.logo){var i=document.createElement("img");i.src=e.displayOptions.logo,i.style.position="absolute";var n=e.displayOptions.logoPosition.toLowerCase();-1!==n.indexOf("bottom")?i.style.bottom=0:i.style.top=0,-1!==n.indexOf("right")?i.style.right=0:i.style.left=0,e.displayOptions.logoOpacity&&(i.style.opacity=e.displayOptions.logoOpacity),i.style.pointerEvents="none",t.parentNode.insertBefore(i,null)}},initHtmlOnPauseBlock:function(){var e=this;if(e.displayOptions.htmlOnPauseBlock){var t=document.getElementById(e.videoPlayerId),i=document.createElement("div");i.id=e.videoPlayerId+"_fluid_html_on_pause",i.className="fluid_html_on_pause",i.style.display="none",i.innerHTML=e.displayOptions.htmlOnPauseBlock,i.onclick=function(i){e.playPauseToggle(t)},e.displayOptions.htmlOnPauseBlockWidth&&(i.style.width=e.displayOptions.htmlOnPauseBlockWidth+"px"),e.displayOptions.htmlOnPauseBlockHeight&&(i.style.height=e.displayOptions.htmlOnPauseBlockHeight+"px"),t.parentNode.insertBefore(i,null)}},init:function(e,t,i){var n=this,l=document.getElementById(e);n.vastOptions={vastTagUrl:t,tracking:[],stopTracking:[]},n.videoPlayerId=e,n.originalSrc=n.getCurrentSrc(),n.isCurrentlyPlayingAd=!1,n.recentWaiting=!1,n.latestVolume=1,n.currentVideoDuration=0,n.initialStart=!1,n.suppressClickthrough=!1,n.timelinePreviewData=[],n.displayOptions={mediaType:"video/mp4",skipButtonCaption:"Skip ad in [seconds]",skipButtonClickCaption:'Skip ad <span class="skip_button_icon"></span>',layout:"default",templateLocation:fluidPlayerScriptLocation+"templates/",scriptsLocation:fluidPlayerScriptLocation+"scripts/",vastTimeout:5e3,timelinePreview:{},vastLoadedCallback:function(){},noVastVideoCallback:function(){},vastVideoSkippedCallback:function(){},vastVideoEndedCallback:function(){},playerInitCallback:function(){},autoPlay:!1,logo:null,logoPosition:"top left",logoOpacity:1,adText:null,adCTAText:null,htmlOnPauseBlock:null,htmlOnPauseBlockWidth:null,htmlOnPauseBlockHeight:null,responsive:!1};for(var o in i)n.displayOptions[o]=i[o];"/"!==n.displayOptions.templateLocation.slice(-1)&&(n.displayOptions.templateLocation+="/"),"/"!==n.displayOptions.scriptsLocation.slice(-1)&&(n.displayOptions.scriptsLocation+="/"),n.setupPlayerWrapper(),l.addEventListener("webkitfullscreenchange",n.recalculateAdDimensions,!1),l.addEventListener("fullscreenchange",n.recalculateAdDimensions,!1),l.addEventListener("waiting",n.onRecentWaiting,!1),l.addEventListener("pause",n.onFluidPlayerPause,!1),l.addEventListener("durationchange",function(){n.currentVideoDuration=n.getCurrentVideoDuration()},!1),l.addEventListener("error",n.onErrorDetection,!1),n.currentVideoDuration=n.getCurrentVideoDuration(),isNaN(n.currentVideoDuration)&&(n.currentVideoDuration=0),n.setLayout(),n.latestVolume=l.volume,n.handleFullscreen(),n.initLogo(),n.initHtmlOnPauseBlock(),n.displayOptions.playerInitCallback(),n.createVideoSourceSwitch(),n.displayOptions.autoPlay&&l.play()}};